<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>MoneyFlow – Dashboard Keuangan</title>
<style>
  :root {
    --bg: #ffffff;
    --primary: #ff3ea5;
    --muted: #fdf3f8;
    --text: #1a1a1a;
    --card-shadow: 0 8px 25px rgba(255, 62, 165, 0.1);
    --radius: 12px;
    --transition: all 0.35s ease;
  }
  [data-theme="dark"] {
    --bg: #18141a;
    --primary: #ff66c4;
    --muted: #241f25;
    --text: #fdfdfd;
    --card-shadow: 0 8px 25px rgba(255, 102, 196, 0.1);
  }
  * { box-sizing: border-box; transition: var(--transition); }
  body {
    margin: 0;
    font-family: "Inter", system-ui, sans-serif;
    background: linear-gradient(180deg, var(--bg), var(--muted));
    color: var(--text);
    min-height: 100vh;
  }
  .navbar {
    display: flex; justify-content: space-between; align-items: center;
    padding: 14px 22px; background: var(--bg); box-shadow: var(--card-shadow);
    position: sticky; top: 0; z-index: 100;
  }
  .brand { font-weight: 800; font-size: 20px; color: var(--primary); }
  .nav-btn {
    background: transparent; border: none; color: var(--text);
    cursor: pointer; font-weight: 600; margin-left: 10px;
    border-radius: 8px; padding: 6px 10px; transition: var(--transition);
  }
  .nav-btn:hover { background: rgba(255, 62, 165, 0.08); }
  .mode-toggle {
    background: var(--primary); border: none; color: white;
    padding: 6px 10px; border-radius: 10px; cursor: pointer; font-weight: 700;
  }
  .page { display: none; padding: 20px; max-width: 900px; margin: auto; }
  .page.active { display: block; }
  .card {
    background: var(--bg); border-radius: var(--radius);
    box-shadow: var(--card-shadow); padding: 18px; margin-top: 16px;
  }
  label { font-weight: 600; display: block; margin-top: 12px; }
  input, select, textarea {
    width: 100%; padding: 10px; margin-top: 6px;
    border: 1px solid rgba(0,0,0,0.08); border-radius: 10px;
    font-size: 14px; background: var(--muted); color: var(--text);
  }
  .btn {
    background: var(--primary); color: white; border: none;
    padding: 10px 14px; border-radius: 10px; cursor: pointer;
    font-weight: 700; margin-top: 12px; transition: var(--transition);
  }
  .btn:hover { transform: scale(1.03); }
  .btn.full { width: 100%; }
  .transaction-item {
    display: flex; justify-content: space-between;
    padding: 10px 0; border-bottom: 1px solid rgba(255,62,165,0.1);
  }
  .transaction-item.income span { color: #22c55e; }
  .transaction-item.expense span { color: #ef4444; }
  .summary {
    display: grid; grid-template-columns: repeat(auto-fit,minmax(200px,1fr));
    gap: 12px;
  }
  .sum-card {
    background: var(--muted); padding: 12px; border-radius: 10px; text-align: center;
  }
  .progress-bar {
    width: 100%; height: 10px; border-radius: 10px;
    background: rgba(255,62,165,0.15); margin-top: 10px; overflow: hidden;
  }
  .progress-bar-fill {
    height: 100%; background: var(--primary); width: 0; transition: width 0.5s ease;
  }
  .toast {
    position: fixed; bottom: 20px; right: 20px;
    background: var(--primary); color: white; padding: 12px 18px;
    border-radius: 10px; opacity: 0; pointer-events: none;
    transition: all 0.5s ease; box-shadow: var(--card-shadow);
  }
  .toast.show { opacity: 1; transform: translateY(-10px); }
  @media (max-width: 600px) {
    .navbar { flex-direction: column; gap: 6px; }
    .nav-btn { font-size: 14px; }
  }
</style>
</head>
<body>
  <div class="navbar">
    <div class="brand">MoneyFlow</div>
    <div>
      <button class="nav-btn" data-target="home">Home</button>
      <button class="nav-btn" data-target="tracker">Tracker</button>
      <button class="nav-btn" data-target="summary">Summary</button>
      <button class="mode-toggle" id="modeToggle">Mode</button>
    </div>
  </div>

  <div class="page active" id="home">
    <div class="card">
      <h2>Selamat Datang di MoneyFlow</h2>
      <p>Kelola pemasukan dan pengeluaran harianmu</p>
    </div>
  </div>

  <div class="page" id="tracker">
    <div class="card">
      <h3>Tambah Transaksi</h3>
      <form id="transactionForm">
        <label>Tanggal</label>
        <input type="date" id="date" required>
        <label>Jenis</label>
        <select id="type" required>
          <option value="income">Pemasukan</option>
          <option value="expense">Pengeluaran</option>
        </select>
        <label>Kategori</label>
        <input type="text" id="category" placeholder="Contoh: Makan, Gaji..." required>
        <label>Nominal</label>
        <input type="number" id="amount" placeholder="Rp" required>
        <label>Catatan (Opsional)</label>
        <textarea id="note" rows="2"></textarea>
        <button type="submit" class="btn full">Simpan</button>
      </form>
    </div>
    <div class="card">
      <h3>Daftar Transaksi</h3>
      <div id="transactionList"></div>
    </div>
  </div>

  <div class="page" id="summary">
    <div class="card">
      <h3>Ringkasan Keuangan</h3>
      <div class="summary">
        <div class="sum-card">
          <h4>Pemasukan</h4>
          <p id="totalIncome">Rp 0</p>
        </div>
        <div class="sum-card">
          <h4>Pengeluaran</h4>
          <p id="totalExpense">Rp 0</p>
        </div>
        <div class="sum-card">
          <h4>Saldo</h4>
          <p id="totalBalance">Rp 0</p>
          <div class="progress-bar"><div id="progressBar" class="progress-bar-fill"></div></div>
        </div>
      </div>
    </div>
  </div>

  <div class="toast" id="toast"></div>

<script>
  const pages = document.querySelectorAll('.page');
  const navBtns = document.querySelectorAll('.nav-btn');
  const modeToggle = document.getElementById('modeToggle');
  const body = document.body;
  const toast = document.getElementById('toast');

  const showToast = msg => {
    toast.textContent = msg;
    toast.classList.add('show');
    setTimeout(() => toast.classList.remove('show'), 2000);
  };

  navBtns.forEach(btn => {
    btn.addEventListener('click', () => {
      const target = btn.getAttribute('data-target');
      pages.forEach(p => p.classList.remove('active'));
      document.getElementById(target).classList.add('active');
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });
  });

  modeToggle.addEventListener('click', () => {
    const theme = body.getAttribute('data-theme');
    if (theme === 'dark') {
      body.removeAttribute('data-theme');
      localStorage.setItem('theme', 'light');
      showToast('Mode Terang');
    } else {
      body.setAttribute('data-theme', 'dark');
      localStorage.setItem('theme', 'dark');
      showToast('Mode Gelap');
    }
  });
  if (localStorage.getItem('theme') === 'dark') body.setAttribute('data-theme', 'dark');

  const form = document.getElementById('transactionForm');
  const list = document.getElementById('transactionList');
  const totalIncome = document.getElementById('totalIncome');
  const totalExpense = document.getElementById('totalExpense');
  const totalBalance = document.getElementById('totalBalance');
  const progressBar = document.getElementById('progressBar');

  let transactions = JSON.parse(localStorage.getItem('transactions')) || [];

  const saveData = () => localStorage.setItem('transactions', JSON.stringify(transactions));

  const renderList = () => {
    list.innerHTML = '';
    transactions.forEach(t => {
      const div = document.createElement('div');
      div.className = `transaction-item ${t.type}`;
      div.innerHTML = `
        <div>
          <strong>${t.category}</strong><br>
          <small>${t.date} — ${t.note || '-'}</small>
        </div>
        <span>${t.type === 'income' ? '+' : '-'}Rp ${t.amount.toLocaleString('id-ID')}</span>
      `;
      list.appendChild(div);
    });
  };

  const updateSummary = () => {
    let income = 0, expense = 0;
    transactions.forEach(t => {
      if (t.type === 'income') income += t.amount;
      else expense += t.amount;
    });
    const balance = income - expense;
    totalIncome.textContent = 'Rp ' + income.toLocaleString('id-ID');
    totalExpense.textContent = 'Rp ' + expense.toLocaleString('id-ID');
    totalBalance.textContent = 'Rp ' + balance.toLocaleString('id-ID');
    const percentage = income === 0 ? 0 : Math.max(0, Math.min(100, (balance / income) * 100));
    progressBar.style.width = percentage + '%';
  };

  form.addEventListener('submit', e => {
    e.preventDefault();
    const data = {
      date: document.getElementById('date').value,
      type: document.getElementById('type').value,
      category: document.getElementById('category').value,
      amount: parseInt(document.getElementById('amount').value),
      note: document.getElementById('note').value
    };
    transactions.push(data);
    saveData();
    form.reset();
    renderList();
    updateSummary();
    showToast('Transaksi Ditambahkan!');
  });

  const resetBtn = document.createElement('button');
  resetBtn.textContent = 'Reset Semua Data';
  resetBtn.className = 'btn full';
  resetBtn.style.background = '#e74c3c';
  resetBtn.style.color = 'white';
  resetBtn.style.marginTop = '20px';

  resetBtn.addEventListener('click', () => {
    if (confirm('Yakin mau hapus semua catatan?')) {
      transactions = [];
      localStorage.removeItem('transactions');
      renderList();
      updateSummary();
      showToast('Data Direset');
    }
  });
  document.getElementById('home').appendChild(resetBtn);

  renderList();
  updateSummary();
</script>
</body>
</html>